# Milestone v2.0: Twilight Hardcore

**Status:** SHIPPED 2026-01-22
**Phases:** 17-23
**Total Plans:** 7

## Overview

Replace night-lock with a twilight system where time flows normally but the world remains perpetually hostile â€” mobs spawn in daylight, undead don't burn, and clients see eternal dusk.

## Phases

### Phase 17: Remove Night Lock

**Goal**: Server time flows normally again
**Depends on**: Nothing (first v2.0 phase)
**Plans**: 1 plan

Plans:
- [x] 17-01: Remove night lock system

**Details:**
Deleted night-lock code from THC.kt so server time advances naturally (doDaylightCycle not forced to false). Preserved MOB_GRIEFING setting from v1.3.

### Phase 18: Twilight Visuals

**Goal**: Client sees perpetual dusk regardless of actual server time
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 18-01: Create client-side dusk sky mixin

**Details:**
Client-side mixin targeting Level.getTimeOfDay returns fixed dusk time (0.541667 normalized = 13000 ticks). Overworld only - Nether/End sky unaffected. Uses instanceof ClientLevel check for safety.

### Phase 19: Undead Sun Immunity

**Goal**: Undead mobs never burn from sunlight
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 19-01: Create MobSunBurnMixin for sun immunity

**Details:**
HEAD injection on Mob.isSunBurnTick returning false unconditionally. All undead (Zombie, Skeleton, Phantom) inherit from Mob, so single mixin covers all. Fire damage from lava and fire aspect uses separate code paths - unaffected.

### Phase 20: Hostile Spawn Bypass

**Goal**: Monsters spawn regardless of sky light level
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 20-01: Create MonsterSpawnLightMixin for sky light bypass

**Details:**
HEAD inject on Monster.isDarkEnoughToSpawn bypassing sky light check. Preserves block light check via DimensionType.monsterSpawnBlockLightLimit() so torches still create safe zones.

### Phase 21: Bee Always-Work

**Goal**: Bees work continuously regardless of time/weather
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 21-01: Create BeeMixin for 24/7 bee work

**Details:**
@Redirect on EnvironmentAttributeReader.getValue for BEES_STAY_IN_HIVE attribute. Returns false so bees never consider environmental conditions as reason to stay in hive. MC 1.21+ EnvironmentAttributeSystem replaces deprecated isNightOrRaining.

### Phase 22: Villager Twilight

**Goal**: Villagers behave as if it's always night
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 22-01: Create VillagerMixin for perpetual night schedule

**Details:**
@Redirect on Brain.updateActivityFromSchedule forcing time parameter to 13000L (mid-night). Villagers always select REST activity, seeking shelter and beds. Trading still works via player interaction override.

### Phase 23: Bed Mechanics

**Goal**: Beds always usable, no time skip
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:
- [x] 23-01: Bed mechanics (24/7 sleep, no time skip)

**Details:**
Two mixins: PlayerSleepMixin redirects BedRule lookup to custom rule allowing sleep at any time. ServerLevelSleepMixin redirects ADVANCE_TIME gamerule check in sleep block to return false, preventing time skip while preserving spawn point setting.

---

## Milestone Summary

**Key Decisions:**

- Target Mob class for sun burn prevention (inheritance covers all undead)
- Use BedRule redirect for cleanest sleep restriction bypass
- Preserve block light spawn protection while bypassing sky light
- Client-only visual override (server time real, client sees dusk)
- Brain schedule redirect with constant time for forced activity

**Issues Resolved:**

- Night-lock system replaced with more flexible twilight approach
- MC 1.21 API changes handled (EnvironmentAttributeSystem, package reorganizations)

**Issues Deferred:**

None - all v2.0 features shipped.

**Technical Debt Incurred:**

None identified.

---

*For current project status, see .planning/ROADMAP.md*
