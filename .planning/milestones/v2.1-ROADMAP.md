# Milestone v2.1: Extra Features Batch 5

**Status:** SHIPPED 2026-01-22
**Phases:** 24-29
**Total Plans:** 7

## Overview

Combat and survival systems that reinforce risk/reward philosophy. Melee damage weakened, ranged weapons gated behind Trial Chambers, wind charges become core mobility, threat system adds tactical aggro management, world difficulty maximized while bases remain safe, and twilight system creates perpetual hostility.

**v2.1 Focus:** Survival progression gating through furnace requirements, healing skill expression through saturation management, and improved village protection granularity.

## Phases

### Phase 24: Blast Totem

**Goal**: Blast Totem item exists and replaces Totem of Undying everywhere
**Depends on**: Nothing (first phase of v2.1)
**Requirements**: PROG-01, PROG-02
**Plans**: 1 plan

Plans:
- [x] 24-01: Register Blast Totem item and replace Totem drops

**Success Criteria** (what must be TRUE):
  1. Player can obtain Blast Totem from any source that previously dropped Totem of Undying
  2. Blast Totem displays custom texture (blast_totem.png) in inventory
  3. Totem of Undying no longer appears in any loot table or chest

### Phase 25: Furnace Gating

**Goal**: Furnace progression gated behind Nether access
**Depends on**: Phase 24 (blast totem needed for blast furnace recipe)
**Requirements**: PROG-03, PROG-04, PROG-05, PROG-06
**Plans**: 2 plans

Plans:
- [x] 25-01: Remove vanilla recipes and create gated furnace recipe
- [x] 25-02: Remove natural furnace spawns from villages

**Success Criteria** (what must be TRUE):
  1. Furnace cannot be crafted with vanilla recipe (requires blaze powder)
  2. Furnaces do not spawn naturally in villages
  3. Blast furnace requires furnace + blast totem to craft
  4. Blast furnaces do not spawn naturally in villages

### Phase 26: Structure Protection

**Goal**: Village protection based on structures, not chunks
**Depends on**: Nothing (independent system)
**Requirements**: PROT-01, PROT-02, PROT-03
**Plans**: 1 plan

Plans:
- [x] 26-01: Replace chunk-based with position-based structure protection

**Success Criteria** (what must be TRUE):
  1. Player cannot break non-ore blocks within village structure bounding boxes
  2. Player can mine freely underground below villages
  3. Current chunk-based protection replaced with structure-based protection

### Phase 27: Eating Mechanics

**Goal**: Eating provides saturation cap behavior and takes longer
**Depends on**: Nothing (independent system)
**Requirements**: HEAL-01, HEAL-02
**Plans**: 1 plan

Plans:
- [x] 27-01: Implement eating duration and saturation cap

**Success Criteria** (what must be TRUE):
  1. Eating food sets saturation to max of food's saturation and current saturation
  2. Eating takes 64 ticks (3.2 seconds) instead of vanilla 32 ticks

### Phase 28: Exhaustion & Base Healing

**Goal**: Exhaustion drains faster, healing requires high hunger
**Depends on**: Nothing (independent system)
**Requirements**: HEAL-03, HEAL-04, HEAL-05, HEAL-11
**Plans**: 1 plan

Plans:
- [x] 28-01: Override FoodData.tick() with custom exhaustion and healing

**Success Criteria** (what must be TRUE):
  1. 4.0 exhaustion removes 1.21 saturation (faster drain)
  2. Player does not heal below hunger level 18
  3. Player heals at 1/8 hearts/second when hunger >= 18
  4. Vanilla natural regeneration gamerule effect disabled

### Phase 29: Saturation Tiers

**Goal**: Healing rate scales with saturation tier
**Depends on**: Phase 28 (builds on healing infrastructure)
**Requirements**: HEAL-06, HEAL-07, HEAL-08, HEAL-09, HEAL-10
**Plans**: 1 plan

Plans:
- [x] 29-01: Implement saturation tier healing with fixed interval

**Success Criteria** (what must be TRUE):
  1. Saturation 6.36+ adds +21/16 heart/s healing
  2. Saturation 2.73+ adds +13/16 heart/s healing
  3. Saturation 1.36+ adds +8/16 heart/s healing
  4. Saturation 0.45+ adds +5/16 heart/s healing
  5. Saturation 0-0.45 adds +3/16 heart/s healing

## Progress

| Phase | Name | Plans Complete | Status | Completed |
|-------|------|----------------|--------|-----------|
| 24 | Blast Totem | 1/1 | Complete | 2026-01-22 |
| 25 | Furnace Gating | 2/2 | Complete | 2026-01-22 |
| 26 | Structure Protection | 1/1 | Complete | 2026-01-22 |
| 27 | Eating Mechanics | 1/1 | Complete | 2026-01-22 |
| 28 | Exhaustion & Healing | 1/1 | Complete | 2026-01-22 |
| 29 | Saturation Tiers | 1/1 | Complete | 2026-01-22 |

**Total:** 7 plans across 6 phases

---

## Milestone Summary

**Key Decisions:**

- Position-based village protection: Structure bounding boxes vs chunk detection for granular protection
- ThreadLocal for cross-injection state: Store saturation in HEAD, compare in RETURN for cap behavior
- HEAD cancellation for FoodData.tick(): Complete control over exhaustion and healing logic
- Fixed interval + variable heal amount: Simpler than variable intervals for saturation tier healing
- Plain Item class for Blast Totem: No special behavior needed, just a crafting ingredient

**Issues Resolved:**

- Village protection was too aggressive (blocked underground mining)
- Healing system needed skill expression (saturation management)

**Technical Debt Incurred:**

None identified.

---

*For current project status, see .planning/ROADMAP.md (if exists) or .planning/PROJECT.md*
*Archived: 2026-01-22*
