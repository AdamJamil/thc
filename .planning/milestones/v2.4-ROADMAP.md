# Milestone v2.4: Extra Features Batch 8

**Status:** ✅ SHIPPED 2026-01-26
**Phases:** 46-52
**Total Plans:** 9

## Overview

Mobility and survival mechanics expansion with resource economy restrictions. Iron boats enable lava navigation (Nether traversal), copper buckets provide early-game water transport at reduced capability. Elytra flight rebalanced for skill-based diving mechanics. Economy restrictions remove brewing completely (structure spawns, crafting, bartering) and saddles from all sources. Armor progression rebalanced with copper tier insertion and half armor point support.

## Phases

### Phase 46: Iron Boat

**Goal**: Players can craft and use iron boats for safe lava navigation
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 46-01-PLAN.md — Entity + item registration with lava physics and damage immunity
- [x] 46-02-PLAN.md — Client renderer and asset files (recipe, models, lang)
- [x] 46-03-PLAN.md — Passenger fire protection mixin and verification

**Details:**
- Custom item registration with recipe data generation
- Custom entity or vanilla boat extension for lava compatibility
- Item entity behavior override for lava immunity and floating
- Fly-to-player behavior on boat break (similar to trident loyalty)

---

### Phase 47: Saddle Removal

**Goal**: Saddles are completely unobtainable, removing mounted combat
**Depends on**: Nothing (independent)
**Plans**: 1 plan

Plans:
- [x] 47-01-PLAN.md — Recipe removal, villager trade filtering, and loot table overrides

**Details:**
- Loot table modification pattern (established in prior milestones)
- Mob drop filtering via loot event interception
- Recipe removal via REMOVED_RECIPE_PATHS pattern

---

### Phase 48: Copper Bucket

**Goal**: Players have early-game bucket option with water/milk restriction
**Depends on**: Nothing (independent)
**Plans**: 1 plan

Plans:
- [x] 48-01-PLAN.md — Copper bucket items with fluid restriction and cow milking

**Details:**
- Custom item registration with three texture variants
- Fluid interaction restriction via item use event
- Recipe data generation with copper ingot inputs

---

### Phase 49: Fluid Placement Mechanics

**Goal**: Bucket-based fluid economy restricts infinite water and lava placement
**Depends on**: Phase 48 (copper bucket must exist first)
**Plans**: 1 plan

Plans:
- [x] 49-01-PLAN.md — Lava placement blocking and flowing water placement

**Details:**
- BucketItem use interception for lava placement blocking
- Water placement override to spawn flowing water instead of source
- Vanilla water physics preserved (natural flow and drain)

---

### Phase 50: Elytra Flight Changes

**Goal**: Elytra flight requires skill-based diving instead of firework spam
**Depends on**: Nothing (independent)
**Plans**: 1 plan

Plans:
- [x] 50-01-PLAN.md — Firework boost cancellation and pitch-based velocity multipliers

**Details:**
- Firework boost cancellation via player flight event or mixin
- Pitch-based velocity modification during elytra tick
- Speed multipliers applied to existing elytra physics

---

### Phase 51: Brewing Removal

**Goal**: Potions are completely unobtainable, removing buff/heal economy
**Depends on**: Nothing (independent)
**Plans**: 1 plan

Plans:
- [x] 51-01-PLAN.md — Structure filtering, recipe removal, and piglin bartering loot override

**Details:**
- Structure block filtering via existing setBlock redirect pattern
- Recipe removal via REMOVED_RECIPE_PATHS
- Piglin bartering loot table modification

---

### Phase 52: Armor Rebalancing

**Goal**: Armor progression provides clear upgrade tiers with copper insertion
**Depends on**: Nothing (independent)
**Plans**: 1 plan

Plans:
- [x] 52-01-PLAN.md — Armor attribute modifier registration for all 5 tiers

**Details:**
- ArmorMaterial modification via DefaultItemComponentEvents.MODIFY
- Per-piece armor distribution calculated to ensure monotonic progression
- Half armor point rendering handled by vanilla (supports fractions internally)
- Netherite is ultimate tier with highest armor AND toughness

---

## Milestone Summary

**Key Accomplishments:**

1. **Iron boat for lava navigation** — Custom entity with fire immunity, lava buoyancy, and fly-to-player drops
2. **Saddle removal** — Completely unobtainable (8 loot tables, recipe, villager trades)
3. **Copper bucket system** — Early-game water transport with lava restriction
4. **Fluid placement restrictions** — Lava buckets blocked, placed water flows and drains
5. **Skill-based elytra flight** — Firework boost cancelled, 2x/1.8x diving/ascending multipliers
6. **Brewing economy eliminated** — Brewing stands removed from structures/recipes, fire resistance potions from piglins
7. **Armor progression rebalanced** — 5-tier progression (leather 7 → netherite 20+6) with fractional values

**Key Decisions:**

- Custom entity type registration with ResourceKey in MC 1.21.11 (build() requires ResourceKey not String)
- Supplier parameter in Boat constructor for drop item (MC 1.21.11 AbstractBoat)
- DataComponents.DAMAGE_RESISTANT with DamageTypeTags.IS_FIRE for item fire/lava immunity
- EntityRenderer<T, EntityRenderState> basic pattern for entity registration (MC 1.21.11 rendering API)
- Loot table data pack overrides for complete item removal (saddles from 8 sources)
- Custom bucket pattern: Extend Item (not BucketItem), override use(), check FluidState with FluidTags
- UseEntityCallback for entity-specific item interactions (cow milking with copper bucket)
- HEAD cancellation with InteractionResult.FAIL for item use blocking (lava bucket)
- FlowingFluid.LEVEL setValue for water flow level control (level 8 = max height/falling)
- @Redirect on setDeltaMovement for velocity boost cancellation (FireworkRocketEntity)
- HEAD+TAIL velocity capture on travel() for delta calculation and multiplier application
- ItemAttributeModifiers.builder() for armor attribute modification
- Fractional armor values (1.5, 2.0, 3.0) for smooth progression

**Issues Resolved:**

- MC 1.21.11 entity registration API changes (ResourceKey, EntityRenderer generics)
- Cow class import path in MC 1.21.11: net.minecraft.world.entity.animal.cow.Cow (cow subpackage)

**Technical Debt Incurred:**

- Phase 46 (Iron Boat) unverified - code complete per SUMMARY.md but no VERIFICATION.md

**Stats:**

- Git range: v2.3 → v2.4 (320f557)
- Commits: 47
- Files changed: 85
- Lines: +10,013 / -28

---

_For current project status, see .planning/ROADMAP.md (next milestone) or .planning/STATE.md_
