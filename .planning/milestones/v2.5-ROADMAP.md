# Milestone v2.5: Enchantment Overhaul

**Status:** SHIPPED 2026-01-28
**Phases:** 53-56
**Total Plans:** 9

## Overview

Transform enchanting from tedious grind into stage-gated progression with meaningful choices. Removes 12 enchantments completely, enforces single-level enchantments across all types, introduces lectern enchanting for early-stage books (unlimited use), overhauls enchanting tables for stage 3+ books (book-determined outcomes), and adds mob-drop sources for specific stage 3+ enchantments while removing them from Overworld chests.

## Phases

### Phase 53: Enforcement Foundation

**Goal**: All 12 removed enchantments are purged from the game and all enchantments display/function as single-level
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 53-01: Core enchantment enforcement (loot filtering + mob equipment correction)
- [x] 53-02: Display override (hide level suffix in tooltips)
- [x] 53-03: Fire damage customization (Flame 6HP, Fire Aspect 9HP)

**Details:**
- Removed enchantments: loyalty, impaling, riptide, infinity, knockback, punch, quick charge, lunge, thorns, wind burst, multishot, density
- EnchantmentEnforcement utility with REMOVED_ENCHANTMENTS set
- ItemEnchantmentsMixin for level-free tooltip display
- Custom fire damage via FIRE_SOURCE attachment and accumulator pattern

---

### Phase 54: Lectern Enchanting

**Goal**: Players can use lecterns to apply stage 1-2 enchantments repeatedly without consuming books
**Depends on**: Phase 53 (single-level enforcement must be active)
**Plans**: 1 plan

Plans:
- [x] 54-01: Lectern enchanting handler (stage 1-2 set, UseBlockCallback, book placement, gear enchanting)

**Details:**
- Stage 1-2 enchantments: mending, unbreaking, efficiency, fortune, silk_touch, lure, luck_of_the_sea
- Right-click empty lectern with stage 1-2 book to place
- Right-click lectern with gear to enchant (level 10+, costs 3 levels)
- Book remains on lectern after use (unlimited applications)
- Stage 3+ books rejected with actionbar message

---

### Phase 55: Enchanting Table Overhaul

**Goal**: Enchanting tables use book-slot mechanic for deterministic stage 3+ enchanting
**Depends on**: Phase 53 (single-level enforcement must be active)
**Plans**: 3 plans

Plans:
- [x] 55-01: Soul Dust item + stage classification (level requirements)
- [x] 55-02: New recipe (ISI/SBS/ISI) + vanilla recipe removal
- [x] 55-03: EnchantmentMenuMixin (deterministic book-slot enchanting)

**Details:**
- New Soul Dust crafting ingredient
- Recipe: Iron Block / Soul Dust / Iron Block, Soul Dust / Book / Soul Dust, Iron Block / Soul Dust / Iron Block
- Requires 15 bookshelves to function
- Book placed in slot determines exact enchantment (no RNG)
- Stage 3: level 20 minimum, Stage 4-5: level 30 minimum
- All enchantments cost 3 levels
- Book remains in slot after use (unlimited)

---

### Phase 56: Acquisition Gating

**Goal**: Stage 3+ enchantments are only obtainable through specific mob drops, not Overworld chests
**Depends on**: Phase 53 (enchantment system foundation must be stable)
**Plans**: 2 plans

Plans:
- [x] 56-01: Stage 3+ classification and loot filtering (EnchantmentEnforcement + MODIFY_DROPS)
- [x] 56-02: Mob enchanted book drops (6 mob loot tables, 10 pools)

**Details:**
- Stage 3+ enchanted books and items filtered from chest loot via MODIFY_DROPS
- Mob drops (2.5% base, +1% with Looting):
  - Drowned: aqua affinity, depth strider, frost walker, respiration
  - Spider: bane of arthropods
  - Husk/Stray: smite
  - Blaze: fire protection
  - Magma Cube (5% base): flame, fire aspect

---

## Milestone Summary

**Key Decisions:**

- Use string IDs for enchantment comparison (stable across registry reloads)
- Non-persistent FIRE_SOURCE attachment (fire is temporary)
- Accumulator pattern for Fire Aspect 1.5 dmg/s (alternating 1 and 2 HP)
- 140 ticks fire duration for 6 actual damage applications
- Stage 4-5 enchantments include fire-related and utility enchants
- Book stays in slot after enchanting (unlimited uses)
- Flat +1% Looting bonus (not scaling per level)

**Issues Resolved:**

- Critical bug: Stage 3+ loot filtering was also filtering mob drops (fixed in f524a1c)
- ResourceKey method name: location() -> identifier() in MC 1.21.11

**Issues Deferred:**

None

**Technical Debt Incurred:**

None

---

_For current project status, see .planning/ROADMAP.md_
