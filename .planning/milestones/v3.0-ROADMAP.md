# Roadmap: THC v3.0 Revival System

## Overview

This milestone replaces instant death with a cooperative revival mechanic. When a player's HP reaches 0, they enter a downed state (switched to spectator mode, tethered to their downed location) instead of dying. Teammates can revive downed players by sneaking nearby, with Support class gaining 2x revival speed. A radial progress ring around the cursor provides visual feedback during revival. On revival, players are teleported back to their downed location and restored to survival mode.

## Phases

**Phase Numbering:**
- Continues from v2.8 (phases 66-71)
- v3.0 covers phases 72-74

- [ ] **Phase 72: Core Downed State** - Death interception, spectator mode, location tether
- [ ] **Phase 73: Revival Mechanics** - Proximity revival with progress tracking and outcomes
- [ ] **Phase 74: Revival UI** - Radial progress ring around cursor

## Phase Details

### Phase 72: Core Downed State
**Goal**: Players enter spectator mode instead of dying, tethered to their downed location
**Depends on**: Nothing (foundation phase)
**Requirements**: DOWN-01, DOWN-02, DOWN-03, DOWN-04, DOWN-05
**Success Criteria** (what must be TRUE):
  1. Player at 0 HP enters downed state instead of dying
  2. Downed player is set to spectator mode
  3. Downed location is tracked per player
  4. Player teleported back if more than 50 blocks from downed location
  5. Spectator mode inherently provides invulnerability and mob AI exclusion
**Plans**: TBD

Plans:
- [ ] 72-01: Death interception via ALLOW_DEATH event, spectator mode switch, downed attachment with location

### Phase 73: Revival Mechanics
**Goal**: Alive players can revive downed teammates through cooperative interaction
**Depends on**: Phase 72 (requires downed state to exist)
**Requirements**: REVV-01, REVV-02, REVV-03, REVV-04, REVV-05, RVOU-01, RVOU-02, RVOU-03, RVOU-04, RVOU-05
**Success Criteria** (what must be TRUE):
  1. Player can revive downed player by sneaking within 2 blocks of downed location
  2. Reviver must stay still to continue progress (movement pauses revival)
  3. Revival takes 10 seconds base (0.5 progress/tick), 5 seconds for Support (1.0/tick)
  4. Revival progress is preserved when interrupted (does not reset)
  5. Revived player is set to survival mode and teleported to downed location
  6. Revived player has 50% HP and 0 hunger
  7. Green particles play on successful revival
**Plans**: TBD

Plans:
- [ ] 73-01: Revival progress tracking (proximity to downed location, stillness check, class bonus)
- [ ] 73-02: Revival completion (survival mode, teleport, HP/hunger values, particles)

### Phase 74: Revival UI
**Goal**: Revivers see visual feedback showing revival progress
**Depends on**: Phase 73 (requires progress data to render)
**Requirements**: RVUI-01, RVUI-02, RVUI-03
**Success Criteria** (what must be TRUE):
  1. Radial progress ring appears around cursor when looking at downed location within 2 blocks
  2. Empty ring texture shows at 0% progress
  3. Filled ring texture fills radially as progress increases
  4. Progress ring disappears when revival completes or reviver moves away
**Plans**: TBD

Plans:
- [ ] 74-01: Client state sync (RevivalPayload for progress data and downed locations)
- [ ] 74-02: HUD rendering (radial ring with empty/filled textures, cursor-centered)

## Progress

**Execution Order:**
Phases execute in numeric order: 72 -> 73 -> 74

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 72. Core Downed State | 0/1 | Not started | - |
| 73. Revival Mechanics | 0/2 | Not started | - |
| 74. Revival UI | 0/2 | Not started | - |

**Total:** 3 phases, 5 plans estimated

---

*Roadmap created: 2026-01-31*
*Milestone: v3.0 Revival System*
