---
phase: 05-crafting-tweaks
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/data/minecraft/recipe/ladder.json
  - src/main/resources/data/thc/recipe/snow_block_to_snowballs.json
  - src/main/resources/data/thc/recipe/snowballs_to_snow_block.json
  - src/main/java/thc/mixin/SnowballItemMixin.java
  - src/main/resources/thc.mixins.json
autonomous: true
must_haves:
  truths:
    - "Crafting 7 sticks in ladder pattern yields 16 ladders"
    - "Snowballs stack to 64 in inventory"
    - "Crafting a snow block yields 9 snowballs"
    - "Crafting 9 snowballs (3x3) yields 1 snow block"
  artifacts:
    - path: "src/main/resources/data/minecraft/recipe/ladder.json"
      provides: "Overridden ladder recipe with count 16"
      contains: "\"count\": 16"
    - path: "src/main/resources/data/thc/recipe/snow_block_to_snowballs.json"
      provides: "Snow block decomposition recipe"
      contains: "minecraft:snowball"
    - path: "src/main/resources/data/thc/recipe/snowballs_to_snow_block.json"
      provides: "Snowball compression recipe"
      contains: "minecraft:snow_block"
    - path: "src/main/java/thc/mixin/SnowballItemMixin.java"
      provides: "Stack size override for snowballs"
      contains: "maxStackSize"
  key_links:
    - from: "ladder.json"
      to: "minecraft:ladder"
      via: "recipe override"
    - from: "SnowballItemMixin"
      to: "Items.SNOWBALL"
      via: "mixin injection"
---

<objective>
Implement quality-of-life crafting tweaks for ladders and snow items.

Purpose: Make ladders more accessible for vertical building and improve snow item usability with larger stacks and conversion recipes.
Output: Recipe overrides and mixin for stack size modification.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing recipe pattern reference:
@src/main/resources/data/thc/recipes/stone_buckler.json

# Existing mixin configuration:
@src/main/resources/thc.mixins.json

# Recipe removal mixin for pattern reference:
@src/main/java/thc/mixin/RecipeManagerMixin.java
</context>

<tasks>

<task type="auto">
  <name>Task 1: Override vanilla ladder recipe</name>
  <files>src/main/resources/data/minecraft/recipe/ladder.json</files>
  <action>
    Create directory `src/main/resources/data/minecraft/recipe/` if needed.
    Create `ladder.json` that overrides the vanilla ladder recipe.
    Use same pattern as vanilla (7 sticks in H shape) but change result count from 3 to 16.

    Recipe pattern (same as vanilla):
    ```
    S S
    SSS
    S S
    ```
    Where S = stick

    Use minecraft:crafting_shaped type with result count: 16.
  </action>
  <verify>File exists with correct structure and count: 16</verify>
  <done>Ladder recipe override yields 16 ladders from 7 sticks</done>
</task>

<task type="auto">
  <name>Task 2: Add snow block to snowballs recipe</name>
  <files>src/main/resources/data/thc/recipe/snow_block_to_snowballs.json</files>
  <action>
    Create shapeless recipe that converts 1 snow block into 9 snowballs.
    Use minecraft:crafting_shapeless type.
    Ingredient: minecraft:snow_block
    Result: minecraft:snowball with count: 9
  </action>
  <verify>File exists with correct shapeless recipe structure</verify>
  <done>Snow block can be crafted into 9 snowballs</done>
</task>

<task type="auto">
  <name>Task 3: Add snowballs to snow block recipe</name>
  <files>src/main/resources/data/thc/recipe/snowballs_to_snow_block.json</files>
  <action>
    Create shaped recipe that converts 9 snowballs into 1 snow block.
    Use minecraft:crafting_shaped type with 3x3 pattern of snowballs.
    Result: minecraft:snow_block with count: 1

    Pattern:
    ```
    SSS
    SSS
    SSS
    ```
    Where S = snowball
  </action>
  <verify>File exists with correct shaped recipe structure</verify>
  <done>9 snowballs can be crafted into 1 snow block</done>
</task>

<task type="auto">
  <name>Task 4: Create snowball stack size mixin</name>
  <files>src/main/java/thc/mixin/SnowballItemMixin.java, src/main/resources/thc.mixins.json</files>
  <action>
    Create a mixin that modifies the snowball item's max stack size to 64.

    In MC 1.21+, item components control stack size. The cleanest approach is to use
    @Mixin targeting Items class with @Inject at the end of static initialization,
    or target SnowballItem class directly.

    Alternative: Use Fabric's item modification API if available, or modify the
    DataComponents.MAX_STACK_SIZE component on Items.SNOWBALL after registration.

    Implementation approach:
    1. Create SnowballItemMixin.java targeting the Items class
    2. Use @Inject on clinit or a ModifyVariable on the snowball item builder
    3. Set max stack size to 64

    Reference the existing mixin patterns in the project (RecipeManagerMixin, etc.)

    Add "SnowballItemMixin" to the mixins array in thc.mixins.json.
  </action>
  <verify>
    - SnowballItemMixin.java exists with correct mixin annotations
    - thc.mixins.json includes "SnowballItemMixin" in mixins array
  </verify>
  <done>Snowballs stack to 64 instead of 16</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./gradlew build` succeeds without errors
- [ ] Recipe files are valid JSON
- [ ] Mixin is registered in thc.mixins.json
- [ ] No compilation errors
</verification>

<success_criteria>

- All 4 tasks completed
- All verification checks pass
- Ladder recipe yields 16
- Snow block/snowball conversion recipes exist
- Snowball stack mixin registered
</success_criteria>

<output>
After completion, create `.planning/phases/05-crafting-tweaks/05-01-SUMMARY.md`
</output>
