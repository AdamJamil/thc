---
phase: 14-ranged-weapon-gating
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/data/minecraft/recipe/bow.json
  - src/main/resources/data/minecraft/recipe/crossbow.json
autonomous: true

must_haves:
  truths:
    - "Bow recipe requires 3 breeze rods + 3 string (no sticks)"
    - "Crossbow recipe requires breeze rod + diamond (no sticks/iron)"
  artifacts:
    - path: "src/main/resources/data/minecraft/recipe/bow.json"
      provides: "Modified bow recipe with breeze rods"
      contains: "breeze_rod"
    - path: "src/main/resources/data/minecraft/recipe/crossbow.json"
      provides: "Modified crossbow recipe with breeze rod and diamond"
      contains: "breeze_rod"
  key_links:
    - from: "bow.json"
      to: "minecraft:bow result"
      via: "crafting_shaped recipe"
      pattern: "minecraft:bow"
    - from: "crossbow.json"
      to: "minecraft:crossbow result"
      via: "crafting_shaped recipe"
      pattern: "minecraft:crossbow"
---

<objective>
Modify bow and crossbow recipes to require Trial Chamber materials (breeze rods).

Purpose: Gate ranged weapons behind Trial Chamber progression, requiring players to engage with that content before obtaining bows/crossbows.
Output: Two recipe JSON overrides replacing vanilla bow and crossbow recipes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Relevant source files:
@src/main/resources/data/minecraft/recipe/wind_charge.json — recipe override pattern
@src/main/resources/data/minecraft/recipe/ladder.json — shaped recipe override pattern
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create bow recipe override</name>
  <files>src/main/resources/data/minecraft/recipe/bow.json</files>
  <action>
Create shaped crafting recipe that replaces vanilla bow recipe:
- Pattern: 3 breeze rods in a column + 3 string in a column
- Layout (one option that makes visual sense):
  ```
  " RS"
  "R S"
  " RS"
  ```
  Where R = breeze_rod, S = string

This mirrors the vanilla bow shape but replaces sticks with breeze rods.

Use same JSON structure as ladder.json:
- type: minecraft:crafting_shaped
- category: equipment
- key with ingredient mappings using item IDs directly (not objects)
- pattern array
- result with id: minecraft:bow

Note: Minecraft 1.21+ uses simplified ingredient format - just the string ID, not {"item": ...} objects.
  </action>
  <verify>
cat src/main/resources/data/minecraft/recipe/bow.json | grep -q "breeze_rod" && echo "OK: breeze_rod found"
./gradlew build 2>&1 | tail -5
  </verify>
  <done>bow.json exists with breeze_rod ingredient, build passes</done>
</task>

<task type="auto">
  <name>Task 2: Create crossbow recipe override</name>
  <files>src/main/resources/data/minecraft/recipe/crossbow.json</files>
  <action>
Create shaped crafting recipe that replaces vanilla crossbow recipe:
- Requirements: breeze rod + diamond (replaces sticks + iron)
- Keep tripwire hook and string from vanilla recipe

Vanilla crossbow pattern:
```
"#I#"
"STS"
" # "
```
Where # = stick, I = iron_ingot, S = string, T = tripwire_hook

Modified pattern - replace sticks with breeze_rod, iron_ingot with diamond:
```
"RDR"
"STS"
" R "
```
Where R = breeze_rod, D = diamond, S = string, T = tripwire_hook

Use same JSON structure:
- type: minecraft:crafting_shaped
- category: equipment
- key with simplified ingredient format (string IDs)
- result with id: minecraft:crossbow
  </action>
  <verify>
cat src/main/resources/data/minecraft/recipe/crossbow.json | grep -q "breeze_rod" && echo "OK: breeze_rod found"
cat src/main/resources/data/minecraft/recipe/crossbow.json | grep -q "diamond" && echo "OK: diamond found"
./gradlew build 2>&1 | tail -5
  </verify>
  <done>crossbow.json exists with breeze_rod and diamond ingredients, build passes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] bow.json exists in data/minecraft/recipe/
- [ ] bow.json contains breeze_rod (3x) and string (3x)
- [ ] crossbow.json exists in data/minecraft/recipe/
- [ ] crossbow.json contains breeze_rod, diamond, tripwire_hook, string
- [ ] `./gradlew build` succeeds without errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Bow recipe uses 3 breeze rods + 3 string
- Crossbow recipe uses breeze rod + diamond + tripwire hook + string
  </success_criteria>

<output>
After completion, create `.planning/phases/14-ranged-weapon-gating/14-01-SUMMARY.md`
</output>
