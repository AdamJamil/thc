---
phase: 21-bee-always-work
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/java/thc/mixin/BeeMixin.java
  - src/main/resources/thc.mixins.json
autonomous: true

must_haves:
  truths:
    - "Bees collect nectar at any server time (day or night)"
    - "Bees collect nectar during rain"
    - "Bees still return to hive when nectar-full"
  artifacts:
    - path: "src/main/java/thc/mixin/BeeMixin.java"
      provides: "isNightOrRaining override returning false"
      contains: "isNightOrRaining"
    - path: "src/main/resources/thc.mixins.json"
      provides: "BeeMixin registration"
      contains: "BeeMixin"
  key_links:
    - from: "BeeMixin.java"
      to: "net.minecraft.world.entity.animal.Bee"
      via: "@Mixin annotation targeting Bee class"
      pattern: "@Mixin.*Bee"
---

<objective>
Make bees work 24/7 regardless of time of day or weather.

Purpose: In twilight hardcore, the world is perpetually hostile. Bees should continue
their normal work cycle without being affected by the visual twilight or actual server
time/weather conditions. This ensures farms remain productive.

Output: BeeMixin that overrides isNightOrRaining to always return false.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Pattern reference (established in Phase 19):
@src/main/java/thc/mixin/MobSunBurnMixin.java

Mixin config:
@src/main/resources/thc.mixins.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BeeMixin for 24/7 bee work</name>
  <files>src/main/java/thc/mixin/BeeMixin.java</files>
  <action>
Create a mixin targeting `net.minecraft.world.entity.animal.Bee`.

Inject at HEAD of `isNightOrRaining(Level)` method with cancellable=true.
Return `false` unconditionally via `cir.setReturnValue(false)`.

This single method controls both time-of-day and weather checks for bee work behavior.
When it returns false, bees:
- Continue pollinating and collecting nectar at night
- Continue working during rain
- Still return to hive when nectar-full (separate method: canEnterHive)

Follow the exact pattern from MobSunBurnMixin:
- Package: thc.mixin
- Method naming: thc$alwaysWork (follows thc$ prefix convention)
- Javadoc explaining twilight hardcore context

Method signature to target:
```java
private boolean isNightOrRaining(Level level)
```

Note: This is a private method, so use method name string matching.
  </action>
  <verify>File exists at src/main/java/thc/mixin/BeeMixin.java with @Inject on isNightOrRaining</verify>
  <done>BeeMixin.java created with HEAD inject returning false</done>
</task>

<task type="auto">
  <name>Task 2: Register BeeMixin in mixins config</name>
  <files>src/main/resources/thc.mixins.json</files>
  <action>
Add "BeeMixin" to the mixins array in thc.mixins.json.

Insert in alphabetical order (after "BellBlockMixin", before "ExampleMixin").
  </action>
  <verify>grep -q "BeeMixin" src/main/resources/thc.mixins.json</verify>
  <done>BeeMixin registered in thc.mixins.json</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./gradlew build` succeeds without errors
- [ ] BeeMixin.java exists with isNightOrRaining inject
- [ ] thc.mixins.json includes BeeMixin
- [ ] Build output shows no mixin application errors
</verification>

<success_criteria>

- All tasks completed (2/2)
- Build passes with no mixin errors
- BEE-01 implemented (bees work regardless of time)
- BEE-02 implemented (bees work regardless of weather)
- BEE-03 preserved (canEnterHive method untouched - bees still return when nectar-full)
</success_criteria>

<output>
After completion, create `.planning/phases/21-bee-always-work/21-01-SUMMARY.md`
</output>
