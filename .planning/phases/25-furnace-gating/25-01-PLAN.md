---
phase: 25-furnace-gating
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/java/thc/mixin/RecipeManagerMixin.java
  - src/main/resources/data/minecraft/recipe/furnace.json
  - src/main/resources/data/thc/recipe/blast_furnace.json
autonomous: true

must_haves:
  truths:
    - "Furnace cannot be crafted with vanilla recipe (cobblestone only)"
    - "Furnace can be crafted with blaze powder center + 8 cobblestone"
    - "Blast furnace cannot be crafted with vanilla recipe"
    - "Blast furnace can be crafted with furnace + blast totem"
  artifacts:
    - path: "src/main/resources/data/minecraft/recipe/furnace.json"
      provides: "Custom furnace recipe with blaze powder"
      contains: "blaze_powder"
    - path: "src/main/resources/data/thc/recipe/blast_furnace.json"
      provides: "Custom blast furnace recipe with blast totem"
      contains: "thc:blast_totem"
    - path: "src/main/java/thc/mixin/RecipeManagerMixin.java"
      provides: "Vanilla recipe removal for furnace and blast furnace"
      contains: "blast_furnace"
  key_links:
    - from: "RecipeManagerMixin.java"
      to: "vanilla recipes"
      via: "REMOVED_RECIPE_PATHS set filtering"
      pattern: "furnace.*blast_furnace"
---

<objective>
Gate furnace and blast furnace crafting behind Nether access.

Purpose: Enforce progression where smelting requires Nether travel (blaze powder for furnace) and Evoker fight (blast totem for blast furnace). This creates meaningful risk gates for core survival progression.

Output: Modified recipe system where vanilla furnace/blast furnace recipes are removed and replaced with gated alternatives.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-blast-totem/24-01-SUMMARY.md

Relevant source files:
@src/main/java/thc/mixin/RecipeManagerMixin.java
@src/main/resources/data/minecraft/recipe/bow.json (example recipe override)
@src/main/resources/data/thc/recipe/stone_buckler.json (example shaped recipe)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove vanilla furnace and blast furnace recipes</name>
  <files>src/main/java/thc/mixin/RecipeManagerMixin.java</files>
  <action>
    Add "furnace" and "blast_furnace" to the REMOVED_RECIPE_PATHS set.

    The existing mixin already filters recipes by path - just need to add the two recipe paths.

    Note: Use exact recipe path names. The vanilla furnace recipe is "furnace" and blast furnace is "blast_furnace".
  </action>
  <verify>Build succeeds: `./gradlew build` passes without errors</verify>
  <done>REMOVED_RECIPE_PATHS contains "furnace" and "blast_furnace"</done>
</task>

<task type="auto">
  <name>Task 2: Create custom furnace recipe with blaze powder</name>
  <files>src/main/resources/data/minecraft/recipe/furnace.json</files>
  <action>
    Create shaped recipe JSON for furnace:
    - Type: minecraft:crafting_shaped
    - Category: misc
    - Pattern: 3x3 grid with cobblestone surrounding blaze powder center
      ```
      "CCC"
      "CBC"
      "CCC"
      ```
    - Keys: C = minecraft:cobblestone, B = minecraft:blaze_powder
    - Result: minecraft:furnace (count 1)

    Place in data/minecraft/recipe/ to override vanilla furnace recipe namespace.

    Follow existing recipe format from bow.json for structure reference.
  </action>
  <verify>Recipe JSON is valid: no syntax errors when loaded</verify>
  <done>furnace.json exists with blaze_powder center, cobblestone surround pattern</done>
</task>

<task type="auto">
  <name>Task 3: Create custom blast furnace recipe with blast totem</name>
  <files>src/main/resources/data/thc/recipe/blast_furnace.json</files>
  <action>
    Create shapeless recipe JSON for blast furnace:
    - Type: minecraft:crafting_shapeless
    - Category: misc
    - Ingredients: minecraft:furnace, thc:blast_totem
    - Result: minecraft:blast_furnace (count 1)

    Place in data/thc/recipe/ since this is a THC-specific recipe.

    Shapeless format (2 ingredients):
    ```json
    {
      "type": "minecraft:crafting_shapeless",
      "category": "misc",
      "ingredients": [
        "minecraft:furnace",
        "thc:blast_totem"
      ],
      "result": {
        "id": "minecraft:blast_furnace"
      }
    }
    ```
  </action>
  <verify>Recipe JSON is valid: no syntax errors when loaded</verify>
  <done>blast_furnace.json exists with furnace + blast_totem ingredients</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./gradlew build` succeeds without errors
- [ ] RecipeManagerMixin contains "furnace" and "blast_furnace" in REMOVED_RECIPE_PATHS
- [ ] furnace.json exists in data/minecraft/recipe/ with correct pattern
- [ ] blast_furnace.json exists in data/thc/recipe/ with correct ingredients
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Vanilla furnace recipe blocked
- Custom furnace recipe requires blaze powder
- Vanilla blast furnace recipe blocked
- Custom blast furnace recipe requires furnace + blast totem
</success_criteria>

<output>
After completion, create `.planning/phases/25-furnace-gating/25-01-SUMMARY.md`
</output>
