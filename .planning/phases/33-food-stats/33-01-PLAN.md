---
phase: 33-food-stats
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/kotlin/thc/THC.kt
  - src/main/kotlin/thc/food/FoodStatsModifier.kt
autonomous: true

must_haves:
  truths:
    - "Raw meats provide 0 saturation when eaten"
    - "Cooked meats provide 1.6-1.8 saturation when eaten"
    - "Vegetables and crops provide 0-0.7 saturation when eaten"
    - "Golden foods provide 8-10 saturation when eaten"
    - "Hunger values match design ranges for each category"
  artifacts:
    - path: "src/main/kotlin/thc/food/FoodStatsModifier.kt"
      provides: "DefaultItemComponentEvents.MODIFY handler for food rebalancing"
      min_lines: 50
  key_links:
    - from: "FoodStatsModifier"
      to: "DefaultItemComponentEvents.MODIFY"
      via: "event registration in THC.kt onInitialize"
      pattern: "DefaultItemComponentEvents\\.MODIFY\\.register"
---

<objective>
Rebalance all vanilla food items' nutrition and saturation values per design specification.

Purpose: Create meaningful food tiers where raw foods are nearly worthless, cooked foods provide sustenance but minimal healing, and golden foods are premium for healing potential. This integrates with the saturation-tiered healing system from v2.1.

Output: Food rebalancing handler that modifies vanilla item components at startup.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-food-removals/32-01-SUMMARY.md
@src/main/kotlin/thc/THC.kt
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FoodStatsModifier with DefaultItemComponentEvents</name>
  <files>src/main/kotlin/thc/food/FoodStatsModifier.kt</files>
  <action>
Create a new Kotlin file for food stat modifications using Fabric's DefaultItemComponentEvents.MODIFY API.

**API Pattern:**
```kotlin
import net.fabricmc.fabric.api.item.v1.DefaultItemComponentEvents
import net.minecraft.core.component.DataComponents
import net.minecraft.world.food.FoodProperties
import net.minecraft.world.item.Items

object FoodStatsModifier {
    fun register() {
        DefaultItemComponentEvents.MODIFY.register { context ->
            // Modify items using context.modify(item) { builder ->
            //     builder.set(DataComponents.FOOD, FoodProperties.Builder()...build())
            // }
        }
    }
}
```

**Food Categories and Target Values:**

**Raw Meats (0 saturation - worthless for healing):**
| Item | Hunger | Saturation |
|------|--------|------------|
| RAW_BEEF | 3 | 0f |
| RAW_PORKCHOP | 3 | 0f |
| RAW_CHICKEN | 2 | 0f |
| RAW_RABBIT | 3 | 0f |
| RAW_MUTTON | 2 | 0f |
| RAW_COD | 2 | 0f |
| RAW_SALMON | 2 | 0f |

Note: RAW_CHICKEN should retain its Hunger effect (30% chance). Use builder pattern that preserves effects from the original FoodProperties.

**Cooked Meats (1.6-1.8 saturation - basic healing):**
| Item | Hunger | Saturation |
|------|--------|------------|
| COOKED_BEEF | 8 | 1.8f |
| COOKED_PORKCHOP | 8 | 1.8f |
| COOKED_CHICKEN | 6 | 1.6f |
| COOKED_RABBIT | 5 | 1.6f |
| COOKED_MUTTON | 6 | 1.6f |
| COOKED_COD | 5 | 1.6f |
| COOKED_SALMON | 6 | 1.6f |

**Crops/Vegetables (0-0.7 saturation - minimal healing):**
| Item | Hunger | Saturation |
|------|--------|------------|
| BREAD | 5 | 0.7f |
| CARROT | 3 | 0.5f |
| POTATO | 1 | 0f |
| BAKED_POTATO | 5 | 0.7f |
| MELON_SLICE | 2 | 0.2f |
| APPLE | 4 | 0.5f |
| COOKIE | 2 | 0.2f |
| PUMPKIN_PIE | 5 | 0.7f |
| DRIED_KELP | 1 | 0f |
| SWEET_BERRIES | 2 | 0.2f |
| GLOW_BERRIES | 2 | 0.2f |
| BEETROOT | 1 | 0f |

**Golden Foods (8-10 saturation - premium healing):**
| Item | Hunger | Saturation |
|------|--------|------------|
| GOLDEN_APPLE | 4 | 10f |
| ENCHANTED_GOLDEN_APPLE | 4 | 10f |
| GOLDEN_CARROT | 6 | 10f |

Note: Golden apples should retain their status effects (Regeneration, Absorption). Extract existing effects before rebuilding.

**Special Cases:**
- ROTTEN_FLESH: Keep as-is (4 hunger, 0.8 saturation, Hunger effect) - survival food
- SPIDER_EYE: Keep as-is (2 hunger, 3.2 saturation, Poison) - not regular food
- POISONOUS_POTATO: Keep as-is (2 hunger, 1.2 saturation, Poison) - not regular food
- CHORUS_FRUIT: Keep as-is (4 hunger, 2.4 saturation, teleport) - special mechanics
- HONEY_BOTTLE: Keep as-is (6 hunger, 1.2 saturation, clears poison) - special mechanics

**Implementation Notes:**
- Use `context.modify(Items.ITEM_NAME) { builder -> ... }` for each item
- For items with effects (raw chicken, golden apples), extract effects from original FoodProperties first
- Saturation in FoodProperties is stored directly as the saturation value (not as a modifier)
- Group items by category in the code for readability
  </action>
  <verify>File exists at src/main/kotlin/thc/food/FoodStatsModifier.kt with all food modifications</verify>
  <done>FoodStatsModifier.kt contains MODIFY handler with all 28 food item modifications</done>
</task>

<task type="auto">
  <name>Task 2: Register FoodStatsModifier in mod initialization</name>
  <files>src/main/kotlin/thc/THC.kt</files>
  <action>
Add FoodStatsModifier.register() call in THC.kt's onInitialize() method.

Add import:
```kotlin
import thc.food.FoodStatsModifier
```

In onInitialize(), add:
```kotlin
FoodStatsModifier.register()
```

Place it near other initialization code. Order doesn't matter for DefaultItemComponentEvents as they run during item registration.
  </action>
  <verify>grep -q "FoodStatsModifier.register()" src/main/kotlin/thc/THC.kt</verify>
  <done>FoodStatsModifier registered in mod initialization</done>
</task>

<task type="auto">
  <name>Task 3: Build and verify</name>
  <files>build.gradle.kts</files>
  <action>
Run the build to verify:
1. No compilation errors
2. No missing imports
3. Mixin registration still works

```bash
./gradlew build
```

Check for any warnings about DefaultItemComponentEvents usage.
  </action>
  <verify>./gradlew build succeeds with no errors</verify>
  <done>Build passes, food stat modifications compile correctly</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./gradlew build` succeeds without errors
- [ ] FoodStatsModifier.kt exists with all 28 food modifications
- [ ] FoodStatsModifier.register() is called in THC.kt
- [ ] grep confirms DefaultItemComponentEvents.MODIFY.register pattern exists
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Food modifications cover all 28 items across 4 categories
- Raw meats have 0 saturation
- Cooked meats have 1.6-1.8 saturation
- Crops/vegetables have 0-0.7 saturation
- Golden foods have 10 saturation
  </success_criteria>

<output>
After completion, create `.planning/phases/33-food-stats/33-01-SUMMARY.md`
</output>
