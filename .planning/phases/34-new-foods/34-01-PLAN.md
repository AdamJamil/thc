---
phase: 34-new-foods
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/kotlin/thc/item/THCItems.kt
  - src/main/kotlin/thc/food/FoodStatsModifier.kt
  - src/main/resources/assets/thc/lang/en_us.json
  - src/main/resources/assets/thc/models/item/honey_apple.json
  - src/main/resources/data/thc/recipe/honey_apple.json
autonomous: true

must_haves:
  truths:
    - "Rabbit stew displays as 'Hearty Stew' in game"
    - "Hearty Stew restores 10 hunger, 6.36 saturation"
    - "Honey Apple can be crafted from apple + honey bottle"
    - "Honey Apple restores 8 hunger, 2.73 saturation"
    - "Honey Apple displays with custom texture"
  artifacts:
    - path: "src/main/kotlin/thc/item/THCItems.kt"
      provides: "HONEY_APPLE item registration"
      contains: "HONEY_APPLE"
    - path: "src/main/kotlin/thc/food/FoodStatsModifier.kt"
      provides: "Rabbit stew and honey apple food stats"
      contains: "RABBIT_STEW"
    - path: "src/main/resources/assets/thc/lang/en_us.json"
      provides: "Translation overrides"
      contains: "Hearty Stew"
    - path: "src/main/resources/assets/thc/models/item/honey_apple.json"
      provides: "Honey apple item model"
    - path: "src/main/resources/data/thc/recipe/honey_apple.json"
      provides: "Honey apple shapeless recipe"
  key_links:
    - from: "THCItems.HONEY_APPLE"
      to: "FoodStatsModifier"
      via: "Food component modification at startup"
    - from: "honey_apple.json recipe"
      to: "THCItems.HONEY_APPLE"
      via: "result.id thc:honey_apple"
---

<objective>
Add Hearty Stew (renamed rabbit stew) and Honey Apple food items.

Purpose: Complete food economy overhaul with new high-value food options
Output: Working Hearty Stew rename and craftable Honey Apple item with proper food stats
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-food-stats/33-01-SUMMARY.md

Relevant source files:
@src/main/kotlin/thc/item/THCItems.kt
@src/main/kotlin/thc/food/FoodStatsModifier.kt
@src/main/resources/assets/thc/lang/en_us.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Honey Apple item registration</name>
  <files>src/main/kotlin/thc/item/THCItems.kt</files>
  <action>
Add HONEY_APPLE item to THCItems.kt following existing pattern:

1. Add HONEY_APPLE field after BLAST_TOTEM:
```kotlin
@JvmField
val HONEY_APPLE: Item = register("honey_apple") { key ->
    Item(
        Item.Properties()
            .setId(key)
            .stacksTo(64)
    )
}
```

2. Add to creative tab in init():
```kotlin
entries.accept(HONEY_APPLE)
```

Use food creative tab (not tools) for the honey apple - add a new foodTabKey for minecraft:food_and_drinks, or just add to existing tab if appropriate.

Note: Food properties will be set via FoodStatsModifier in Task 2, not in Item.Properties, to match the existing pattern.
  </action>
  <verify>Build compiles: `./gradlew build`</verify>
  <done>HONEY_APPLE item registered and appears in creative tab</done>
</task>

<task type="auto">
  <name>Task 2: Add food stats for Hearty Stew and Honey Apple</name>
  <files>src/main/kotlin/thc/food/FoodStatsModifier.kt</files>
  <action>
Add food stat modifications to FoodStatsModifier.kt:

1. Import THCItems at top:
```kotlin
import thc.item.THCItems
```

2. Add RABBIT_STEW modification (rename to Hearty Stew is via lang file):
   - 10 hunger, 6.36 saturation
   - Modifier = 6.36 / (10 * 2) = 0.318
```kotlin
// ===== HEARTY STEW (rabbit stew renamed) - premium food =====
// 10 hunger, 6.36 sat -> modifier = 6.36 / 20 = 0.318
context.modify(Items.RABBIT_STEW) { builder ->
    builder.set(DataComponents.FOOD, FoodProperties.Builder()
        .nutrition(10)
        .saturationModifier(0.318f)
        .build())
}
```

3. Add HONEY_APPLE modification for the custom item:
   - 8 hunger, 2.73 saturation
   - Modifier = 2.73 / (8 * 2) = 0.170625
```kotlin
// ===== HONEY APPLE - mid-tier healing food =====
// 8 hunger, 2.73 sat -> modifier = 2.73 / 16 = 0.170625
context.modify(THCItems.HONEY_APPLE) { builder ->
    builder.set(DataComponents.FOOD, FoodProperties.Builder()
        .nutrition(8)
        .saturationModifier(0.170625f)
        .build())
}
```
  </action>
  <verify>Build compiles: `./gradlew build`</verify>
  <done>RABBIT_STEW has 10/6.36 stats, HONEY_APPLE has 8/2.73 stats</done>
</task>

<task type="auto">
  <name>Task 3: Add translation overrides and item model</name>
  <files>src/main/resources/assets/thc/lang/en_us.json, src/main/resources/assets/thc/models/item/honey_apple.json</files>
  <action>
1. Update en_us.json to add:
   - Rabbit stew override: "item.minecraft.rabbit_stew": "Hearty Stew"
   - Honey apple name: "item.thc.honey_apple": "Honey Apple"

2. Create honey_apple.json model file:
```json
{
  "parent": "minecraft:item/generated",
  "textures": {
    "layer0": "thc:item/honey_apple"
  }
}
```

Texture already exists at: src/main/resources/assets/thc/textures/item/honey_apple.png
  </action>
  <verify>JSON files are valid: `python3 -c "import json; json.load(open('src/main/resources/assets/thc/lang/en_us.json'))"`</verify>
  <done>Rabbit stew shows as "Hearty Stew", Honey Apple has name and texture</done>
</task>

<task type="auto">
  <name>Task 4: Add Honey Apple crafting recipe</name>
  <files>src/main/resources/data/thc/recipe/honey_apple.json</files>
  <action>
Create shapeless recipe for Honey Apple:
- Ingredients: 1 apple + 1 honey bottle
- Result: 1 honey apple

```json
{
  "type": "minecraft:crafting_shapeless",
  "category": "misc",
  "ingredients": [
    "minecraft:apple",
    "minecraft:honey_bottle"
  ],
  "result": {
    "count": 1,
    "id": "thc:honey_apple"
  }
}
```
  </action>
  <verify>JSON is valid and recipe file exists</verify>
  <done>Honey Apple craftable from apple + honey bottle</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `./gradlew build` succeeds without errors
- [ ] THCItems.kt contains HONEY_APPLE registration
- [ ] FoodStatsModifier.kt contains RABBIT_STEW and HONEY_APPLE modifications
- [ ] en_us.json contains "Hearty Stew" translation
- [ ] honey_apple.json model exists and references correct texture
- [ ] honey_apple.json recipe exists with correct ingredients
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Honey Apple item fully functional (registered, food stats, model, recipe)
- Rabbit stew renamed to Hearty Stew with updated food stats
  </success_criteria>

<output>
After completion, create `.planning/phases/34-new-foods/34-01-SUMMARY.md`
</output>
