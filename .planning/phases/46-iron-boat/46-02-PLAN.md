---
phase: 46-iron-boat
plan: 02
type: execute
wave: 2
depends_on: ["46-01"]
files_modified:
  - src/client/kotlin/thc/client/IronBoatRenderer.kt
  - src/client/kotlin/thc/THCClient.kt
  - src/main/resources/assets/thc/items/iron_boat.json
  - src/main/resources/assets/thc/models/item/iron_boat.json
  - src/main/resources/data/thc/recipe/iron_boat.json
  - src/main/resources/assets/thc/lang/en_us.json
autonomous: true

must_haves:
  truths:
    - "Iron boat entity renders with iron texture in game"
    - "Iron boat item displays icon in inventory"
    - "Iron boat can be crafted with recipe"
    - "Iron boat shows correct name in inventory"
  artifacts:
    - path: "src/client/kotlin/thc/client/IronBoatRenderer.kt"
      provides: "Entity renderer with iron boat texture"
      contains: "class IronBoatRenderer"
    - path: "src/main/resources/data/thc/recipe/iron_boat.json"
      provides: "Crafting recipe"
      contains: "crafting_shaped"
    - path: "src/main/resources/assets/thc/items/iron_boat.json"
      provides: "Item model reference"
      contains: "thc:item/iron_boat"
  key_links:
    - from: "src/client/kotlin/thc/THCClient.kt"
      to: "THCEntities.IRON_BOAT"
      via: "Renderer registration"
      pattern: "EntityRendererRegistry.*IRON_BOAT"
---

<objective>
Add client-side rendering and all asset files for the iron boat.

Purpose: Make the iron boat visible in-game with proper textures and craftable with recipe.
Output: Working renderer, recipe JSON, item models, and translations.
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/46-iron-boat/46-CONTEXT.md
@.planning/phases/46-iron-boat/46-01-SUMMARY.md

# Reference files for patterns
@src/client/kotlin/thc/THCClient.kt
@src/main/resources/assets/thc/items/blast_totem.json
@src/main/resources/assets/thc/models/item/blast_totem.json
@src/main/resources/data/thc/recipe/honey_apple.json
@src/main/resources/assets/thc/lang/en_us.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Entity Renderer and Register</name>
  <files>
    src/client/kotlin/thc/client/IronBoatRenderer.kt
    src/client/kotlin/thc/THCClient.kt
  </files>
  <action>
**IronBoatRenderer.kt** - Create custom renderer that uses iron_boat.png texture:

Option A (Extend BoatRenderer if possible):
```kotlin
package thc.client

import net.minecraft.client.renderer.entity.BoatRenderer
import net.minecraft.client.renderer.entity.EntityRendererProvider
import net.minecraft.resources.Identifier
import thc.entity.IronBoat

class IronBoatRenderer(context: EntityRendererProvider.Context) : BoatRenderer(context, false) {
    override fun getTextureLocation(entity: IronBoat): Identifier {
        return Identifier.fromNamespaceAndPath("thc", "textures/item/iron_boat.png")
    }
}
```

Option B (If BoatRenderer doesn't work, may need to check actual rendering architecture):
- Check vanilla BoatRenderer implementation
- May need to use model layers or different texture binding approach
- The texture exists at `textures/item/iron_boat.png` - adjust path if vanilla expects different location

**THCClient.kt** - Register renderer:
```kotlin
import net.fabricmc.fabric.api.client.rendering.v1.EntityRendererRegistry
import thc.entity.THCEntities
import thc.client.IronBoatRenderer

// In onInitializeClient():
EntityRendererRegistry.register(THCEntities.IRON_BOAT) { context ->
    IronBoatRenderer(context)
}
```

Note: This requires THCClient to depend on main sourceset for THCEntities access. Check Fabric documentation if import issues arise - may need to reference entity type differently for client.
  </action>
  <verify>`./gradlew build` succeeds including client compilation.</verify>
  <done>IronBoatRenderer created and registered in THCClient.kt.</done>
</task>

<task type="auto">
  <name>Task 2: Create Recipe and Asset Files</name>
  <files>
    src/main/resources/data/thc/recipe/iron_boat.json
    src/main/resources/assets/thc/items/iron_boat.json
    src/main/resources/assets/thc/models/item/iron_boat.json
    src/main/resources/assets/thc/lang/en_us.json
  </files>
  <action>
**Recipe** (`data/thc/recipe/iron_boat.json`) - Minecart shape with 5 iron + magma cream:
```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "I": "minecraft:iron_ingot",
    "M": "minecraft:magma_cream"
  },
  "pattern": [
    "I I",
    "IMI",
    "III"
  ],
  "result": {
    "count": 1,
    "id": "thc:iron_boat"
  }
}
```

**Item definition** (`assets/thc/items/iron_boat.json`):
```json
{
  "model": {
    "type": "minecraft:model",
    "model": "thc:item/iron_boat"
  }
}
```

**Item model** (`assets/thc/models/item/iron_boat.json`) - Use icon texture for inventory:
```json
{
  "parent": "minecraft:item/generated",
  "textures": {
    "layer0": "thc:item/iron_boat_icon"
  }
}
```
Note: Uses iron_boat_icon.png (already exists) for inventory display.

**Language** (`assets/thc/lang/en_us.json`) - Add translation:
Add new entry: `"item.thc.iron_boat": "Iron Boat"`
Preserve all existing entries.
  </action>
  <verify>
    - `./gradlew build` succeeds
    - Recipe JSON is valid: `cat src/main/resources/data/thc/recipe/iron_boat.json | python -m json.tool`
    - All 4 files exist in correct locations
  </verify>
  <done>Recipe allows crafting, item model references icon texture, translation added.</done>
</task>

</tasks>

<verification>
1. `./gradlew build` completes successfully
2. All asset files exist:
   - `ls src/main/resources/data/thc/recipe/iron_boat.json`
   - `ls src/main/resources/assets/thc/items/iron_boat.json`
   - `ls src/main/resources/assets/thc/models/item/iron_boat.json`
3. `grep "iron_boat" src/main/resources/assets/thc/lang/en_us.json` shows translation
4. `grep "EntityRendererRegistry" src/client/kotlin/thc/THCClient.kt` shows renderer registration
</verification>

<success_criteria>
- IronBoatRenderer.kt exists and extends appropriate vanilla renderer
- THCClient registers renderer for IRON_BOAT entity type
- Recipe JSON uses minecart shape (5 iron ingots + magma cream center)
- Item model references iron_boat_icon texture
- Language file includes "Iron Boat" translation
- Build compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/46-iron-boat/46-02-SUMMARY.md`
</output>
