---
phase: 55-enchanting-table-overhaul
plan: 02
type: execute
wave: 2
depends_on: ["55-01"]
files_modified:
  - src/main/resources/data/thc/recipe/enchanting_table.json
  - src/main/java/thc/mixin/RecipeManagerMixin.java
autonomous: true

must_haves:
  truths:
    - "Vanilla enchanting table recipe is removed"
    - "New enchanting table recipe requires iron blocks, soul dust, and book"
  artifacts:
    - path: "src/main/resources/data/thc/recipe/enchanting_table.json"
      provides: "New enchanting table crafting recipe"
      contains: "thc:soul_dust"
    - path: "src/main/java/thc/mixin/RecipeManagerMixin.java"
      provides: "Vanilla recipe removal"
      contains: "enchanting_table"
  key_links:
    - from: "RecipeManagerMixin.java"
      to: "minecraft:enchanting_table recipe"
      via: "REMOVED_RECIPE_PATHS set filtering"
---

<objective>
Create new enchanting table recipe and remove vanilla recipe.

Purpose: Changes the enchanting table from an early-game item (diamonds) to a progression gate requiring soul dust.
Output: New recipe JSON (ISI/SBS/ISI pattern), vanilla recipe removed via RecipeManagerMixin.
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/main/java/thc/mixin/RecipeManagerMixin.java
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create new enchanting table recipe</name>
  <files>src/main/resources/data/thc/recipe/enchanting_table.json</files>
  <action>
Create new recipe file at src/main/resources/data/thc/recipe/enchanting_table.json.

Pattern: ISI/SBS/ISI where I = Iron Block, S = Soul Dust, B = Book

```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "I": "minecraft:iron_block",
    "S": "thc:soul_dust",
    "B": "minecraft:book"
  },
  "pattern": [
    "ISI",
    "SBS",
    "ISI"
  ],
  "result": {
    "id": "minecraft:enchanting_table"
  }
}
```

Ensure the data/thc/recipe/ directory exists (create if needed).
  </action>
  <verify>Verify file exists at src/main/resources/data/thc/recipe/enchanting_table.json. Run `./gradlew build`.</verify>
  <done>Recipe file created with ISI/SBS/ISI pattern using iron blocks, soul dust, and book.</done>
</task>

<task type="auto">
  <name>Task 2: Remove vanilla enchanting table recipe</name>
  <files>src/main/java/thc/mixin/RecipeManagerMixin.java</files>
  <action>
Add "enchanting_table" to the REMOVED_RECIPE_PATHS set in RecipeManagerMixin.java.

Find the existing set definition and add the entry:
```java
@Unique
private static final Set<String> REMOVED_RECIPE_PATHS = Set.of(
    "shield",
    // ... existing entries ...
    "brewing_stand",
    "enchanting_table"  // ADD THIS
);
```

This removes minecraft:enchanting_table recipe, allowing our THC recipe to take precedence.
  </action>
  <verify>Run `./gradlew build`. Verify RecipeManagerMixin.java contains "enchanting_table" in REMOVED_RECIPE_PATHS.</verify>
  <done>Vanilla enchanting table recipe removed via mixin filter.</done>
</task>

</tasks>

<verification>
1. `./gradlew build` completes successfully
2. enchanting_table.json exists at src/main/resources/data/thc/recipe/
3. RecipeManagerMixin.java REMOVED_RECIPE_PATHS contains "enchanting_table"
</verification>

<success_criteria>
- Build passes
- New recipe file uses thc:soul_dust ingredient
- Vanilla recipe is filtered out by mixin
</success_criteria>

<output>
After completion, create `.planning/phases/55-enchanting-table-overhaul/55-02-SUMMARY.md`
</output>
