---
phase: 61-smithing-table-tier-upgrades
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/data/thc/recipe/smithing_table_copper.json
autonomous: true

must_haves:
  truths:
    - "Smithing table craftable with copper ingots instead of iron"
    - "Existing netherite upgrade recipes still work"
  artifacts:
    - path: "src/main/resources/data/thc/recipe/smithing_table_copper.json"
      provides: "Alternative smithing table crafting recipe using copper"
      contains: "crafting_shaped"
  key_links:
    - from: "smithing_table_copper.json"
      to: "vanilla smithing_table recipe"
      via: "alternative recipe (does not override)"
      pattern: "smithing_table"
---

<objective>
Add alternative smithing table crafting recipe using copper ingots and verify netherite upgrades unchanged.

Purpose: Allow players to craft smithing tables earlier in progression using copper (more accessible than iron).
Output: New crafting recipe for smithing table using copper ingots.
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/61-smithing-table-tier-upgrades/61-RESEARCH.md
@data/minecraft/recipe/netherite_helmet_smithing.json (vanilla format reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Copper Smithing Table Recipe and Verify Netherite Compatibility</name>
  <files>
    src/main/resources/data/thc/recipe/smithing_table_copper.json
  </files>
  <action>
Create smithing_table_copper.json in src/main/resources/data/thc/recipe/:

```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "#": "#minecraft:planks",
    "@": "minecraft:copper_ingot"
  },
  "pattern": [
    "@@",
    "##",
    "##"
  ],
  "result": {
    "count": 1,
    "id": "minecraft:smithing_table"
  }
}
```

This adds an alternative recipe - vanilla iron recipe remains (smithing table can be crafted with either copper or iron ingots).

Matches vanilla pattern but substitutes copper_ingot for iron_ingot:
- 2 copper ingots on top
- 4 planks (any type) filling bottom

This does NOT override the vanilla recipe - it adds a new recipe with a different ID (thc:smithing_table_copper vs minecraft:smithing_table).
  </action>
  <verify>
1. Run `./gradlew build` - JSON is valid and included in JAR
2. Review SmithingMenuMixin.java and TierUpgradeConfig.kt to confirm:
   - Diamond armor/tools (DIAMOND_HELMET, DIAMOND_CHESTPLATE, etc.) are NOT in TierUpgradeConfig base item maps
   - NETHERITE_INGOT is NOT in the addition materials map
   - Mixin's isValidTierUpgrade() check will return false for diamond+netherite_upgrade_smithing_template, allowing vanilla logic to proceed
3. Verify vanilla netherite_*_smithing.json recipes remain in data/minecraft/recipe/
  </verify>
  <done>
1. Smithing table can be crafted with copper ingots as alternative to iron recipe
2. Diamond to netherite upgrade works via vanilla smithing system without interference from tier upgrade mixin (verified by checking TierUpgradeConfig scope)
  </done>
</task>

</tasks>

<verification>
1. `./gradlew build` succeeds
2. smithing_table_copper.json exists with correct recipe format
3. SmithingMenuMixin does not intercept netherite upgrades (diamond is not base for tier upgrades; netherite_ingot is not in addition materials)
4. Vanilla netherite_*_smithing.json recipes remain functional
</verification>

<success_criteria>
- SMTH-10: Existing diamond to netherite upgrade unchanged (mixin scoping verification)
- SMTH-11: Smithing table craftable with copper ingots (new recipe)
</success_criteria>

<output>
After completion, create `.planning/phases/61-smithing-table-tier-upgrades/61-03-SUMMARY.md`
</output>
