---
phase: 64-food-economy-dough-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/java/thc/mixin/RecipeManagerMixin.java
  - src/main/kotlin/thc/item/THCItems.kt
  - src/main/resources/assets/thc/lang/en_us.json
  - src/main/resources/assets/thc/models/item/dough.json
  - src/main/resources/data/thc/recipe/dough.json
  - src/main/resources/data/thc/recipe/dough_copper.json
  - src/main/resources/data/thc/recipe/dough_smelting.json
  - src/main/resources/data/thc/recipe/dough_smoking.json
autonomous: true

must_haves:
  truths:
    - "Player cannot craft bread directly from wheat"
    - "Dough item appears in creative menu food tab"
    - "Dough is craftable from 3 wheat + iron water bucket"
    - "Dough is craftable from 3 wheat + copper water bucket"
    - "Bucket is preserved after crafting dough"
    - "Dough smelts into bread in furnace"
    - "Dough cooks into bread in smoker (faster)"
  artifacts:
    - path: "src/main/java/thc/mixin/RecipeManagerMixin.java"
      provides: "Bread recipe removal"
      contains: "\"bread\""
    - path: "src/main/kotlin/thc/item/THCItems.kt"
      provides: "DOUGH item registration"
      contains: "val DOUGH"
    - path: "src/main/resources/data/thc/recipe/dough.json"
      provides: "Iron bucket dough recipe"
    - path: "src/main/resources/data/thc/recipe/dough_copper.json"
      provides: "Copper bucket dough recipe"
    - path: "src/main/resources/data/thc/recipe/dough_smelting.json"
      provides: "Furnace cooking recipe"
    - path: "src/main/resources/data/thc/recipe/dough_smoking.json"
      provides: "Smoker cooking recipe"
  key_links:
    - from: "dough.json recipe"
      to: "THCItems.DOUGH"
      via: "result.id: thc:dough"
    - from: "dough_smelting.json"
      to: "minecraft:bread"
      via: "result: minecraft:bread"
---

<objective>
Implement the dough crafting system: remove vanilla bread recipe, add dough item, create dough recipes with bucket preservation, and add smelting/smoking recipes for dough to bread conversion.

Purpose: Bread should require cooking rather than instant crafting, adding a processing step that makes food acquisition less trivial.
Output: Working dough item with complete recipe chain from wheat + water bucket -> dough -> bread
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/64-food-economy-dough-system/64-CONTEXT.md
@.planning/phases/64-food-economy-dough-system/64-RESEARCH.md
@src/main/java/thc/mixin/RecipeManagerMixin.java
@src/main/kotlin/thc/item/THCItems.kt
@src/main/resources/assets/thc/lang/en_us.json
@src/main/resources/assets/thc/models/item/soul_dust.json
@src/main/resources/data/thc/recipe/honey_apple.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove bread recipe and register dough item</name>
  <files>
    src/main/java/thc/mixin/RecipeManagerMixin.java
    src/main/kotlin/thc/item/THCItems.kt
    src/main/resources/assets/thc/lang/en_us.json
    src/main/resources/assets/thc/models/item/dough.json
  </files>
  <action>
1. In RecipeManagerMixin.java, add "bread" to the REMOVED_RECIPE_PATHS set (line ~42, after "enchanting_table").

2. In THCItems.kt, add DOUGH item registration following the SOUL_DUST pattern:
```kotlin
@JvmField
val DOUGH: Item = register("dough") { key ->
    Item(
        Item.Properties()
            .setId(key)
            .stacksTo(64)
    )
}
```

3. In THCItems.kt init(), add DOUGH to the food creative tab:
```kotlin
ItemGroupEvents.modifyEntriesEvent(foodTabKey).register { entries ->
    entries.accept(HONEY_APPLE)
    entries.accept(DOUGH)  // Add this line
}
```

4. In en_us.json, add dough translation:
```json
"item.thc.dough": "Dough"
```

5. Create dough.json item model at assets/thc/models/item/dough.json:
```json
{
  "parent": "minecraft:item/generated",
  "textures": {
    "layer0": "thc:item/dough"
  }
}
```
Note: The texture dough.png already exists at assets/thc/textures/item/dough.png
  </action>
  <verify>Run `./gradlew build` - should compile without errors</verify>
  <done>
    - REMOVED_RECIPE_PATHS contains "bread"
    - DOUGH item registered in THCItems
    - DOUGH appears in food creative tab
    - Translation and model files exist
  </done>
</task>

<task type="auto">
  <name>Task 2: Create dough crafting and cooking recipes</name>
  <files>
    src/main/resources/data/thc/recipe/dough.json
    src/main/resources/data/thc/recipe/dough_copper.json
    src/main/resources/data/thc/recipe/dough_smelting.json
    src/main/resources/data/thc/recipe/dough_smoking.json
  </files>
  <action>
1. Create dough.json (iron water bucket recipe):
```json
{
  "type": "minecraft:crafting_shapeless",
  "category": "misc",
  "ingredients": [
    "minecraft:wheat",
    "minecraft:wheat",
    "minecraft:wheat",
    "minecraft:water_bucket"
  ],
  "result": {
    "count": 1,
    "id": "thc:dough"
  }
}
```
Note: Iron water bucket returns empty bucket via vanilla craftRemainder behavior.

2. Create dough_copper.json (copper water bucket recipe):
```json
{
  "type": "minecraft:crafting_shapeless",
  "category": "misc",
  "ingredients": [
    "minecraft:wheat",
    "minecraft:wheat",
    "minecraft:wheat",
    "thc:copper_bucket_of_water"
  ],
  "result": {
    "count": 1,
    "id": "thc:dough"
  }
}
```
Note: Copper bucket has craftRemainder(COPPER_BUCKET) set in THCItems.kt, so it auto-returns.

3. Create dough_smelting.json (furnace recipe):
```json
{
  "type": "minecraft:smelting",
  "category": "food",
  "ingredient": "thc:dough",
  "result": "minecraft:bread",
  "experience": 0.35,
  "cookingtime": 200
}
```

4. Create dough_smoking.json (smoker recipe - 2x faster):
```json
{
  "type": "minecraft:smoking",
  "category": "food",
  "ingredient": "thc:dough",
  "result": "minecraft:bread",
  "experience": 0.35,
  "cookingtime": 100
}
```
  </action>
  <verify>Run `./gradlew build` - should complete successfully with all recipe files included in build output</verify>
  <done>
    - Four recipe files exist and are valid JSON
    - Iron bucket recipe crafts dough and returns empty bucket
    - Copper bucket recipe crafts dough and returns empty copper bucket
    - Furnace cooks dough to bread in 10 seconds
    - Smoker cooks dough to bread in 5 seconds
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: `./gradlew build`
2. Recipe files are valid JSON (build would fail if malformed)
3. All 8 files created/modified as specified
</verification>

<success_criteria>
- FOOD-01: Bread recipe removed from REMOVED_RECIPE_PATHS
- FOOD-02: Dough item registered, craftable with both bucket types, buckets preserved
- FOOD-03: Dough cooks to bread in both furnace (200 ticks) and smoker (100 ticks)
</success_criteria>

<output>
After completion, create `.planning/phases/64-food-economy-dough-system/64-01-SUMMARY.md`
</output>
