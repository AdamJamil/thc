---
phase: 65-enchantment-compatibility
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/data/minecraft/tags/enchantment/exclusive_set/armor.json
  - src/main/resources/data/minecraft/tags/enchantment/exclusive_set/damage.json
autonomous: true

must_haves:
  truths:
    - "Protection + blast protection + fire protection + projectile protection can all exist on same armor piece"
    - "Sharpness + smite + bane of arthropods can all exist on same weapon"
    - "Stacked enchantments apply their effects simultaneously"
  artifacts:
    - path: "src/main/resources/data/minecraft/tags/enchantment/exclusive_set/armor.json"
      provides: "Empty armor exclusive set tag"
      contains: '"replace": true'
    - path: "src/main/resources/data/minecraft/tags/enchantment/exclusive_set/damage.json"
      provides: "Empty damage exclusive set tag"
      contains: '"replace": true'
  key_links:
    - from: "Tag files"
      to: "Enchantment.areCompatible()"
      via: "Data-driven exclusiveSet lookup"
      pattern: "empty exclusive sets allow all combinations"
---

<objective>
Remove enchantment mutual exclusivity for protection and damage enchantment families.

Purpose: Players can stack all protection types on armor (protection + blast + fire + projectile) and all damage types on weapons (sharpness + smite + bane) for maximum customization.

Output: Two JSON tag override files that empty vanilla exclusive sets.
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/65-enchantment-compatibility/65-CONTEXT.md
@.planning/phases/65-enchantment-compatibility/65-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create enchantment exclusive set tag overrides</name>
  <files>
    src/main/resources/data/minecraft/tags/enchantment/exclusive_set/armor.json
    src/main/resources/data/minecraft/tags/enchantment/exclusive_set/damage.json
  </files>
  <action>
Create directory structure: `src/main/resources/data/minecraft/tags/enchantment/exclusive_set/`

Create armor.json with empty exclusive set:
```json
{
  "replace": true,
  "values": []
}
```

Create damage.json with identical content:
```json
{
  "replace": true,
  "values": []
}
```

The `"replace": true` key is critical - it overwrites vanilla entries entirely rather than merging. This breaks the exclusivity link in `Enchantment.areCompatible()` which checks if either enchantment's exclusiveSet HolderSet contains the other.

Note: damage.json also removes exclusivity for impaling, density, and breach (all in vanilla damage exclusive set). Impaling and density are already in THC's REMOVED_ENCHANTMENTS. Breach is new in 1.21 - allowing it to stack with sharpness is consistent with the phase goal.
  </action>
  <verify>
1. Files exist at correct paths:
   - `ls src/main/resources/data/minecraft/tags/enchantment/exclusive_set/`
2. Both files contain `"replace": true` and `"values": []`
3. Build succeeds: `./gradlew build`
  </verify>
  <done>
Two tag override files exist that empty the armor and damage exclusive sets, enabling all protection enchantments to coexist on armor and all damage enchantments to coexist on weapons.
  </done>
</task>

</tasks>

<verification>
1. Build completes without errors
2. Tag files are in correct directory structure for Fabric resource loading
3. JSON format is valid (no syntax errors)
</verification>

<success_criteria>
- armor.json overrides vanilla with empty values array
- damage.json overrides vanilla with empty values array
- Build succeeds confirming resource files are valid
- ENCH-01 and ENCH-02 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/65-enchantment-compatibility/65-01-SUMMARY.md`
</output>
