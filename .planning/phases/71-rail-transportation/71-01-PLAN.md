---
phase: 71-rail-transportation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/data/minecraft/recipe/rail.json
  - src/main/resources/data/minecraft/recipe/powered_rail.json
  - src/main/resources/data/thc/recipe/rail_copper.json
autonomous: true

must_haves:
  truths:
    - "Player can craft 64 rails using iron ingots and sticks"
    - "Player can craft 64 rails using copper ingots and sticks"
    - "Player can craft 64 powered rails using gold ingots, stick, and redstone"
  artifacts:
    - path: "src/main/resources/data/minecraft/recipe/rail.json"
      provides: "Iron rail recipe with 64 yield"
      contains: '"count": 64'
    - path: "src/main/resources/data/thc/recipe/rail_copper.json"
      provides: "Copper rail recipe with 64 yield"
      contains: '"copper_ingot"'
    - path: "src/main/resources/data/minecraft/recipe/powered_rail.json"
      provides: "Powered rail recipe with 64 yield"
      contains: '"count": 64'
  key_links:
    - from: "rail.json"
      to: "minecraft:rail"
      via: "result.id"
      pattern: '"id": "minecraft:rail"'
    - from: "rail_copper.json"
      to: "minecraft:rail"
      via: "result.id (produces vanilla rails)"
      pattern: '"id": "minecraft:rail"'
---

<objective>
Modify rail and powered rail crafting recipes to make rail transportation more accessible. Rails gain a copper alternative ingredient and 4x yield increase (64 per craft). Powered rails gain ~10x yield increase (64 per craft).

Purpose: Rails are crucial for base infrastructure but vanilla yields are too low (16 rails, 6 powered rails). This makes rail networks expensive. Copper alternative provides early-game accessibility.

Output: 3 recipe JSON files that override vanilla rail/powered_rail and add copper alternative.
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/71-rail-transportation/71-RESEARCH.md
@src/main/resources/data/minecraft/recipe/ladder.json (yield increase pattern)
@src/main/resources/data/thc/recipe/dough_copper.json (alternative recipe pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create rail recipe overrides and copper alternative</name>
  <files>
    src/main/resources/data/minecraft/recipe/rail.json
    src/main/resources/data/minecraft/recipe/powered_rail.json
    src/main/resources/data/thc/recipe/rail_copper.json
  </files>
  <action>
Create three JSON recipe files:

1. **rail.json** (override vanilla, iron with 64 yield):
```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "#": "minecraft:stick",
    "X": "minecraft:iron_ingot"
  },
  "pattern": [
    "X X",
    "X#X",
    "X X"
  ],
  "result": {
    "count": 64,
    "id": "minecraft:rail"
  }
}
```

2. **powered_rail.json** (override vanilla, 64 yield):
```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "#": "minecraft:stick",
    "R": "minecraft:redstone",
    "X": "minecraft:gold_ingot"
  },
  "pattern": [
    "X X",
    "X#X",
    "XRX"
  ],
  "result": {
    "count": 64,
    "id": "minecraft:powered_rail"
  }
}
```

3. **rail_copper.json** (alternative recipe in thc namespace):
```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "key": {
    "#": "minecraft:stick",
    "X": "minecraft:copper_ingot"
  },
  "pattern": [
    "X X",
    "X#X",
    "X X"
  ],
  "result": {
    "count": 64,
    "id": "minecraft:rail"
  }
}
```

Note: Use `category: misc` for transportation items (matches vanilla rail category).
  </action>
  <verify>
Run `./gradlew build` - should complete without errors.
Verify files exist at correct paths.
  </verify>
  <done>
Three recipe files exist:
- rail.json produces 64 rails from iron
- rail_copper.json produces 64 rails from copper
- powered_rail.json produces 64 powered rails from gold
All use correct vanilla crafting patterns.
  </done>
</task>

</tasks>

<verification>
After completing the task:

1. **Build verification:**
   ```bash
   ./gradlew build
   ```
   Should complete without errors.

2. **File verification:**
   - `data/minecraft/recipe/rail.json` exists with count: 64
   - `data/minecraft/recipe/powered_rail.json` exists with count: 64
   - `data/thc/recipe/rail_copper.json` exists with copper_ingot and count: 64

3. **Manual testing (optional):**
   - Craft rails with iron ingots - receive 64
   - Craft rails with copper ingots - receive 64
   - Craft powered rails with gold ingots - receive 64
</verification>

<success_criteria>
- RAIL-01: Rails craftable with copper (rail_copper.json in thc namespace)
- RAIL-02: Rails yield 64 per recipe (rail.json with count: 64)
- RAIL-03: Powered rails yield 64 per recipe (powered_rail.json with count: 64)
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/71-rail-transportation/71-01-SUMMARY.md`
</output>
