---
phase: 75-rename
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/java/thc/playerclass/PlayerClass.java
  - src/main/java/thc/playerclass/SelectClassCommand.java
autonomous: true

must_haves:
  truths:
    - "/selectClass bastion command works and selects the class"
    - "/selectClass tank command fails with invalid class message"
    - "Class selection UI shows 'BASTION' in title when selected"
    - "Chat message says 'You are now a bastion!'"
  artifacts:
    - path: "src/main/java/thc/playerclass/PlayerClass.java"
      provides: "BASTION enum value with Tank stats"
      contains: "BASTION"
    - path: "src/main/java/thc/playerclass/SelectClassCommand.java"
      provides: "bastion command suggestion"
      contains: "bastion"
  key_links:
    - from: "SelectClassCommand.java"
      to: "PlayerClass.java"
      via: "PlayerClass.fromString(className)"
      pattern: "fromString.*bastion.*BASTION"
---

<objective>
Rename Tank class to Bastion throughout the codebase.

Purpose: Establish Bastion identity for the defensive class before implementing stage-gated boons. This is a prerequisite for all subsequent v3.1 phases.
Output: `/selectClass bastion` works, `/selectClass tank` fails, UI displays "BASTION"
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/75-rename/75-CONTEXT.md

@src/main/java/thc/playerclass/PlayerClass.java
@src/main/java/thc/playerclass/SelectClassCommand.java
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename TANK enum to BASTION</name>
  <files>src/main/java/thc/playerclass/PlayerClass.java</files>
  <action>
In PlayerClass.java, rename the TANK enum value to BASTION:

Change line 4 from:
```java
TANK(2.0, 2.5, 1.0),      // +1 heart, x2.5 melee, x1 ranged
```

To:
```java
BASTION(2.0, 2.5, 1.0),   // +1 heart, x2.5 melee, x1 ranged
```

The stats (2.0, 2.5, 1.0) remain unchanged. Only the enum name changes.

Note: The fromString() method uses PlayerClass.valueOf(name.toUpperCase()), so this change automatically makes "bastion" work and "tank" fail - no additional code changes needed for case handling.
  </action>
  <verify>File contains BASTION enum value, no TANK reference remains</verify>
  <done>PlayerClass.BASTION exists with same stats as former TANK</done>
</task>

<task type="auto">
  <name>Task 2: Update command suggestion and verify build</name>
  <files>src/main/java/thc/playerclass/SelectClassCommand.java</files>
  <action>
In SelectClassCommand.java, update the tab completion suggestion:

Change line 27 from:
```java
builder.suggest("tank");
```

To:
```java
builder.suggest("bastion");
```

After both files are updated, run `./gradlew build` to verify compilation succeeds.

The command behavior automatically changes because:
- Tab completion now suggests "bastion" instead of "tank"
- PlayerClass.fromString("bastion") returns BASTION
- PlayerClass.fromString("tank") returns null (invalid class)
- Title display uses playerClass.name() which will show "BASTION"
- Chat message uses playerClass.name().toLowerCase() which will show "bastion"
  </action>
  <verify>./gradlew build succeeds with no errors</verify>
  <done>Command suggests "bastion", build compiles successfully</done>
</task>

</tasks>

<verification>
1. Build verification: `./gradlew build` passes
2. Code verification:
   - grep for "TANK" in src/ returns no matches
   - grep for "tank" in src/ returns no matches
   - grep for "BASTION" in PlayerClass.java returns match
   - grep for "bastion" in SelectClassCommand.java returns match
</verification>

<success_criteria>
- [ ] TANK enum renamed to BASTION in PlayerClass.java
- [ ] "tank" suggestion changed to "bastion" in SelectClassCommand.java
- [ ] ./gradlew build compiles successfully
- [ ] No "tank" or "TANK" references remain in src/ directory
- [ ] Requirement RNAM-01 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/75-rename/75-01-SUMMARY.md`
</output>
