---
phase: 79-boat-mastery
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/java/thc/mixin/BoatStackSizeMixin.java
  - src/main/resources/thc.mixins.json
  - src/main/resources/data/minecraft/recipe/oak_boat.json
  - src/main/resources/data/minecraft/recipe/birch_boat.json
  - src/main/resources/data/minecraft/recipe/spruce_boat.json
  - src/main/resources/data/minecraft/recipe/jungle_boat.json
  - src/main/resources/data/minecraft/recipe/acacia_boat.json
  - src/main/resources/data/minecraft/recipe/dark_oak_boat.json
  - src/main/resources/data/minecraft/recipe/mangrove_boat.json
  - src/main/resources/data/minecraft/recipe/cherry_boat.json
  - src/main/resources/data/minecraft/recipe/pale_oak_boat.json
autonomous: true

must_haves:
  truths:
    - "All wooden boats stack to 16 in inventory"
    - "Boat crafting requires 2 copper ingots in bottom corners"
  artifacts:
    - path: "src/main/java/thc/mixin/BoatStackSizeMixin.java"
      provides: "Stack size modification for all boat items"
      contains: "MAX_STACK_SIZE, 16"
    - path: "src/main/resources/data/minecraft/recipe/oak_boat.json"
      provides: "Copper recipe override"
      contains: "copper_ingot"
  key_links:
    - from: "BoatStackSizeMixin"
      to: "Items.OAK_BOAT (and all variants)"
      via: "ItemAccessor.setComponentsInternal"
      pattern: "setComponentsInternal"
---

<objective>
Increase boat stack size to 16 and add copper ingot requirement to all 9 wooden boat recipes.

Purpose: Foundation for Boat Mastery boon - boats become more practical inventory items and require copper investment
Output: Modified stack size via mixin, 9 recipe JSON files overriding vanilla
</objective>

<execution_context>
@/home/tack/.claude/get-shit-done/workflows/execute-plan.md
@/home/tack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v3.1-ROADMAP.md
@.planning/phases/79-boat-mastery/79-RESEARCH.md

# Pattern references
@src/main/java/thc/mixin/SnowballItemMixin.java
@src/main/resources/data/minecraft/recipe/bow.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Boat stack size mixin</name>
  <files>
    src/main/java/thc/mixin/BoatStackSizeMixin.java
    src/main/resources/thc.mixins.json
  </files>
  <action>
Create BoatStackSizeMixin.java following the exact pattern from SnowballItemMixin.java:

```java
package thc.mixin;

import net.minecraft.core.component.DataComponentMap;
import net.minecraft.core.component.DataComponents;
import net.minecraft.world.item.Items;
import org.spongepowered.asm.mixin.Mixin;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Inject;
import org.spongepowered.asm.mixin.injection.callback.CallbackInfo;
import thc.mixin.access.ItemAccessor;

/**
 * Mixin to modify all wooden boat max stack size from 1 to 16.
 * Boats become more practical inventory items for the Boat Mastery boon.
 */
@Mixin(Items.class)
public class BoatStackSizeMixin {

    @Inject(method = "<clinit>", at = @At("TAIL"))
    private static void thc$increaseBoatStackSize(CallbackInfo ci) {
        setStackSize(Items.OAK_BOAT, 16);
        setStackSize(Items.BIRCH_BOAT, 16);
        setStackSize(Items.SPRUCE_BOAT, 16);
        setStackSize(Items.JUNGLE_BOAT, 16);
        setStackSize(Items.ACACIA_BOAT, 16);
        setStackSize(Items.DARK_OAK_BOAT, 16);
        setStackSize(Items.MANGROVE_BOAT, 16);
        setStackSize(Items.CHERRY_BOAT, 16);
        setStackSize(Items.PALE_OAK_BOAT, 16);
        setStackSize(Items.BAMBOO_RAFT, 16);
    }

    private static void setStackSize(net.minecraft.world.item.Item item, int size) {
        DataComponentMap original = item.components();
        DataComponentMap.Builder builder = DataComponentMap.builder();
        builder.addAll(original);
        builder.set(DataComponents.MAX_STACK_SIZE, size);
        ((ItemAccessor) item).setComponentsInternal(builder.build());
    }
}
```

Add "BoatStackSizeMixin" to the mixins array in thc.mixins.json (after SnowballItemMixin).
  </action>
  <verify>`./gradlew compileJava` succeeds without errors</verify>
  <done>BoatStackSizeMixin created and registered in mixins config</done>
</task>

<task type="auto">
  <name>Task 2: Copper boat recipes</name>
  <files>
    src/main/resources/data/minecraft/recipe/oak_boat.json
    src/main/resources/data/minecraft/recipe/birch_boat.json
    src/main/resources/data/minecraft/recipe/spruce_boat.json
    src/main/resources/data/minecraft/recipe/jungle_boat.json
    src/main/resources/data/minecraft/recipe/acacia_boat.json
    src/main/resources/data/minecraft/recipe/dark_oak_boat.json
    src/main/resources/data/minecraft/recipe/mangrove_boat.json
    src/main/resources/data/minecraft/recipe/cherry_boat.json
    src/main/resources/data/minecraft/recipe/pale_oak_boat.json
  </files>
  <action>
Create 9 recipe JSON files in `src/main/resources/data/minecraft/recipe/` to override vanilla boat recipes.

Each recipe follows this pattern (copper ingots in bottom corners):
```
# #
C#C
```

**oak_boat.json:**
```json
{
  "type": "minecraft:crafting_shaped",
  "category": "misc",
  "group": "boat",
  "key": {
    "#": "minecraft:oak_planks",
    "C": "minecraft:copper_ingot"
  },
  "pattern": [
    "# #",
    "C#C"
  ],
  "result": {
    "count": 1,
    "id": "minecraft:oak_boat"
  }
}
```

Create 8 more files with identical structure, changing:
- `oak_planks` -> `birch_planks`, `spruce_planks`, `jungle_planks`, `acacia_planks`, `dark_oak_planks`, `mangrove_planks`, `cherry_planks`, `pale_oak_planks`
- result id -> `minecraft:birch_boat`, `minecraft:spruce_boat`, etc.

Note: Do NOT modify bamboo_raft recipe (only wooden boats need copper per RESEARCH.md).
  </action>
  <verify>`./gradlew build` succeeds and no JSON syntax errors</verify>
  <done>9 boat recipe files created with copper ingredient requirement</done>
</task>

</tasks>

<verification>
1. `./gradlew build` passes
2. Start game, verify boats stack to 16 in inventory
3. Open crafting table, verify boat recipes show copper requirement
</verification>

<success_criteria>
- BOAT-07 satisfied: All 9 wooden boat recipes require 2 copper ingots
- BOAT-08 satisfied: Boats stack to 16 in inventory
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/79-boat-mastery/79-01-SUMMARY.md`
</output>
